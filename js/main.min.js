$(".slider").hide();let tap=new Audio;tap.src="sound/tap.mp3",tap.volume=.04;var gifAll=19,photoAll1=86,photoAll2=129,replace="Просто смотрите фото ^_^",gifNum1=0,gifNum2=0,photoNum1=0,photoNum2=0,id1=0,id2=86,card1="",card2="",slider1=$("#slider-1"),slider2=$("#slider-2");let idAudio=0,musics=$(".div-audio").children("audio");function playMusic(){if(console.log(musics[idAudio]),musics[idAudio].volume=.9,musics[idAudio].paused&&$(".music-btn").hasClass("music-play"))var i=musics[idAudio].play();void 0!==i&&(i.then(i=>{}),i.catch(i=>{})),musics[idAudio].addEventListener("ended",(function(){musics[idAudio].pause(),console.log("next"),idAudio<musics.length-1?(idAudio++,console.log(idAudio),playMusic()):(idAudio=2,musics[idAudio].setAttribute("loop","loop"),playMusic())}))}$(".music-btn").on("click",playMusic),$(".music-btn").click((function(){$(".popup").fadeOut(500),$(".music-btn").hasClass("music-pause")?($(".music-btn").toggleClass("music-pause music-play"),musics[idAudio].play(),console.log("play")):$(".music-btn").hasClass("music-play")&&($(".music-btn").toggleClass("music-play music-pause"),musics[idAudio].pause(),console.log("pause"))}));for(let i=1;i<=2;i++)id1++,photoNum1+=1,i%2!=0&&(gifNum1+=1),gifNum1>gifAll&&(gifNum1=1),null==text[id1]&&(text[id1]=replace),card1=`\n             <div id="${id1}" class="card flipper card-next">\n               <div class="gif-card"><img src="img/gif/${gifNum1}.gif" alt=""></div>\n               <div class="lock lock-close front"><img src="img/lock/lock-close.svg" alt=""></div>\n               <div class="card-img back"><img src="img/photo/ (${photoNum1}).jpg" alt=""></div>\n               <div class="card-transparent back back-1 slick-arrow"></div>\n               <div class="text front"><div class="text_inner"><p>${text[id1]}</p></div></div>\n             </div>\n           `,slider1.append(card1),id1%2==0&&$(`#${id1} .gif-card img`).remove();for(let i=1;i<=2;i++)photoNum2+=1,++id2%2!=0&&(gifNum2+=1),gifNum2>gifAll&&(gifNum2=1),null==text2[i]&&(text2[i]=replace),card2=`\n            <div id="${id2}" class="card flipper card-next">\n              <div class="gif-card"><img src="img/gif/${gifNum2}.gif" alt=""></div>\n              <div class="lock lock-close front"><img src="img/lock/lock-close.svg" alt=""></div>\n              <div class="card-img back"><img src="img/photo-2/ (${photoNum2}).jpg" alt=""></div>\n              <div class="card-transparent back back-2 slick-arrow"></div>\n              <div class="text front"><div class="text_inner"><p>${text2[i]}</p></div></div>\n            </div>\n          `,slider2.append(card2),id2%2==0&&$(`#${id2} .gif-card img`).remove();function renderNextCard1(){return id1++,photoNum1+=1,id1%2!=0&&(gifNum1+=1),gifNum1>gifAll&&(gifNum1=1),null==text[id1]&&(text[id1]=replace),card1=`<div class="slick-slide" data-slick-index="${id1-1}" aria-hidden="true" style="width: 100vw;" tabindex="-1">\n        <div>\n          <div id="${id1}" class="card flipper card-next">\n           <div class="gif-card"><img src="img/gif/${gifNum1}.gif" alt=""></div>\n           <div class="lock lock-close front"><img src="img/lock/lock-close.svg" alt=""></div>\n           <div class="card-img back"><img src="img/photo/ (${id1}).jpg" alt=""></div>\n           <div class="card-transparent back back-1 slick-arrow" aria-disabled="false"></div>\n           <div class="text front"><div class="text_inner"><p>${text[id1]}</p></div></div>\n         </div>\n       </div>\n     </div> `}function renderNextCard2(){return id2++,photoNum2+=1,id2%2!=0&&(gifNum2+=1),gifNum2>gifAll&&(gifNum2=1),null==text2[id2-id1]&&(text2[id2-id1]=replace),card2=`<div class="slick-slide" data-slick-index="${id2-1}" aria-hidden="true" style="width: 100vw;" tabindex="-1">\n        <div>\n          <div id="${id2}" class="card flipper card-next">\n           <div class="gif-card"><img src="img/gif/${gifNum2}.gif" alt=""></div>\n           <div class="lock lock-close front"><img src="img/lock/lock-close.svg" alt=""></div>\n           <div class="card-img back"><img src="img/photo-2/ (${id2-id1}).jpg" alt=""></div>\n           <div class="card-transparent back back-2 slick-arrow" aria-disabled="false"></div>\n           <div class="text front"><div class="text_inner"><p>${text2[id2-id1]}</p></div></div>\n         </div>\n       </div>\n     </div> `}function lockClick(){$("#"+photoAll1).children(".lock").hasClass("lock-open")&&$("#"+(photoAll1+1)).children(".lock").toggleClass("lock-close lock-open"),nextId=$(this).parent().parent().index(".card")+2,($(this).parent().hasClass("lock-open")||"img/lock/lock-open.svg"==$(this).attr("src"))&&($(this).parent().parent().addClass("open"),setTimeout(()=>tap.play(),50),$(this).parent().children(".text").addClass("text-none"),$("#"+nextId).children(".lock").removeClass("lock-close"),$("#"+nextId).children(".lock").addClass("lock-open"),$("#"+nextId).children(".lock").children("img").attr("src","img/lock/lock-open.svg"),$("#"+nextId).children(".text").show()),setTimeout(()=>{$("#"+nextId).children(".lock").hasClass("lock-open")&&nextId+3<=id2&&($("#slider-1").slick("setPosition"),id1%2==0&&$(`#${id1} .gif-card img`).remove(),setTimeout(()=>{$("#slider-1").slick("slickAdd",renderNextCard1())},900))},0),setTimeout(()=>{$("#"+(id2-1)).children(".lock").hasClass("lock-open")&&id2-id1+1<=photoAll2&&($("#slider-2").slick("setPosition"),id2%2==0&&$(`#${id2} .gif-card img`).remove(),setTimeout(()=>{$("#slider-2").slick("slickAdd",renderNextCard2())},900))},0),slick_index=$(this).parent().parent().parent().parent(".slick-slide"),slick_index.attr("data-slick-index")!=photoAll1-2&&slick_index.attr("data-slick-index")!=photoAll1-1||slick_index.attr("tabindex","-1"),$("#"+photoAll1).children(".lock").hasClass("lock-open")&&(arrows='<img class="arrows prerow" src="img/arrows.svg" alt=""><img class="arrows prerow" src="img/arrows.svg" alt=""><img class="arrows prerow" src="img/arrows.svg" alt="">',$(".row-1").append(arrows)),$("#"+photoAll2).children(".lock").hasClass("lock-open")&&(arrows='<img class="arrows prerow" src="img/arrows.svg" alt=""><img class="arrows prerow" src="img/arrows.svg" alt=""><img class="arrows prerow" src="img/arrows.svg" alt="">',$(".row-2").append(arrows))}$(".slider .card:first-child").children(".lock").children("img").attr("src","img/lock/lock-open.svg"),$(".slider .card:first-child").children(".lock").toggleClass("lock-close lock-open"),$(".slider .card").children(".text").hide(),$(".slider .card:first-child").children(".text").show(),$("#"+(photoAll1+1)).children(".lock").children("img").attr("src","img/lock/lock-close.svg"),$("#"+(photoAll1+1)).children(".lock").toggleClass("lock-open lock-close"),$("body").on("click",".lock img",lockClick),$("#slider-1").on("click",".back-1",()=>{$("#slider-1").slick("slickNext")}),$("#slider-2").on("click",".back-2",()=>{$("#slider-2").slick("slickNext")}),jQuery.fn.extend({onAppearanceAddClass:function(i){var s=$(window),a=s.height(),e=[];function d(){a=s.height()}function l(){var o,c,t=[];for(c=e.length,o=0;o<c;++o)s.scrollTop()+a-60>e[o].offset().top&&(e[o].addClass(i),t.push(o));t.length&&function(i){var a;for(a=i.length-1;a>-1;--a)e.splice(i[a],1);e.length||s.off("resize",d).off("scroll",l).off("resize",l)}(t)}return this.each((function(i,s){e.push($(s))})),l(),e.length&&s.on("resize",d).on("resize",l).on("scroll",l),this}}),$("#s1").onAppearanceAddClass("animate__animated animate__zoomIn showop"),$("#s2").onAppearanceAddClass("animate__animated animate__zoomIn showop"),$("#s3").onAppearanceAddClass("animate__animated animate__zoomIn showop"),$("#st1").onAppearanceAddClass("animate__animated animate__zoomIn showop"),$("#st2").onAppearanceAddClass("animate__animated animate__zoomIn showop"),$("#st3").onAppearanceAddClass("animate__animated animate__zoomIn showop"),$("#st4").onAppearanceAddClass("animate__animated animate__zoomIn showop"),$("#st5").onAppearanceAddClass("animate__animated animate__zoomIn showop"),$("#st6").onAppearanceAddClass("animate__animated animate__zoomIn showop"),$("#st7").onAppearanceAddClass("animate__animated animate__zoomIn showop"),$("#st8").onAppearanceAddClass("animate__animated animate__zoomIn showop"),$(".story p").onAppearanceAddClass("animate__animated animate__slideInUp showop"),$(".story_image").onAppearanceAddClass("animate__animated animate__zoomIn showop");